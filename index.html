<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Resume Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <style>
        :root {
            --dark-navy: #182135;
            --accent-blue: #3b5998;
            --text-grey: #555;
            --light-bg: #f9f9f9;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: #e0e0e0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }

        /* --- INPUT FORM --- */
        #input-section {
            background: white;
            padding: 40px;
            width: 100%;
            max-width: 900px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        h2 { margin-bottom: 20px; color: var(--dark-navy); text-align: center; }
        h3.form-heading { 
            margin-top: 25px; 
            margin-bottom: 15px; 
            color: var(--accent-blue); 
            border-bottom: 2px solid #eee; 
            padding-bottom: 5px;
        }
        
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 5px; color: #333; font-size: 0.9rem; }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }
        .form-group textarea { height: 80px; resize: vertical; }
        
        .form-row { display: flex; gap: 20px; }
        .form-row > div { flex: 1; }

        button.generate-btn {
            background-color: var(--dark-navy);
            color: white;
            padding: 15px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 6px;
            width: 100%;
            margin-top: 30px;
            font-weight: bold;
            transition: background 0.3s;
        }
        button.generate-btn:hover { background-color: #2c3e50; }

        /* --- RESUME PREVIEW --- */
        #resume-preview {
            display: none;
            width: 210mm; /* Exact A4 width */
            /* Removed min-height to allow content to dictate height for PDF, 
               but kept a minimum for visual consistency */
            min-height: 297mm; 
            background: white;
            box-shadow: 0 0 25px rgba(0,0,0,0.15);
        }

        /* Header */
        .resume-header {
            background-color: var(--dark-navy);
            color: white;
            display: flex;
            align-items: center;
            padding: 40px;
            gap: 30px;
        }

        .profile-pic-container {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            border: 4px solid white;
            overflow: hidden;
            background: #ccc;
            flex-shrink: 0;
        }
        .profile-pic-container img { width: 100%; height: 100%; object-fit: cover; }

        .header-text { flex-grow: 1; }
        .header-name {
            font-size: 36px;
            text-transform: uppercase;
            font-weight: 700;
            letter-spacing: 2px;
            line-height: 1.2;
        }
        .header-role {
            font-size: 16px;
            font-weight: 300;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 5px;
        }

        /* Layout */
        .resume-body { display: flex; min-height: 800px; }
        .left-col { width: 32%; background-color: #f4f4f4; padding: 30px 20px; }
        .right-col { width: 68%; padding: 35px 30px; }

        /* Section Styles */
        h4.section-title {
            font-size: 15px;
            text-transform: uppercase;
            font-weight: 700;
            color: var(--dark-navy);
            margin-bottom: 15px;
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
            letter-spacing: 1px;
        }

        /* Left Column Content */
        .contact-info div {
            margin-bottom: 12px;
            font-size: 12px;
            color: #444;
            display: flex;
            align-items: center;
            gap: 10px;
            word-break: break-all;
        }
        .contact-info i { width: 16px; color: var(--dark-navy); text-align: center; }

        ul.skills-list, ul.cert-list { list-style: none; margin-bottom: 25px; }
        ul.skills-list li, ul.cert-list li {
            font-size: 13px;
            color: #444;
            margin-bottom: 8px;
            padding-left: 15px;
            position: relative;
        }
        ul.skills-list li::before, ul.cert-list li::before {
            content: "â€¢"; position: absolute; left: 0; color: var(--dark-navy); font-weight: bold;
        }

        /* Right Column Content */
        .profile-summary {
            font-size: 13px; color: #444; line-height: 1.6; margin-bottom: 25px; text-align: justify;
        }

        .item-block { margin-bottom: 20px; }
        .item-header {
            display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 4px;
        }
        .item-title { font-size: 14px; font-weight: 700; color: #222; text-transform: uppercase; }
        .item-sub { font-size: 12px; color: #666; font-style: italic; }
        .item-desc { font-size: 13px; color: #555; line-height: 1.5; }
        .cgpa-badge {
            background: var(--dark-navy); color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; margin-left: 8px;
        }

        /* Controls */
        .controls { position: fixed; bottom: 20px; right: 20px; display: none; gap: 10px; }
        .control-btn {
            background: #333; color: white; padding: 12px 24px; border: none; cursor: pointer; border-radius: 50px; font-weight: 600; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .control-btn:hover { background: #000; }

        /* PDF Generation Loading State */
        .downloading {
            opacity: 0.7;
            pointer-events: none;
            cursor: wait;
        }

        @media print {
            body { background: white; padding: 0; }
            #input-section, .controls { display: none !important; }
            #resume-preview { display: block !important; width: 100%; box-shadow: none; }
        }
    </style>
</head>
<body>

    <div id="input-section">
        <h2>Portfolio & Resume Builder</h2>

        <h3 class="form-heading">Personal Details</h3>
        <div class="form-group">
            <label>Profile Photo</label>
            <input type="file" id="inp-photo" accept="image/*">
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>First Name</label>
                <input type="text" id="inp-fname" placeholder="John" value="JOHN">
            </div>
            <div class="form-group">
                <label>Last Name</label>
                <input type="text" id="inp-lname" placeholder="Doe" value="DOE">
            </div>
        </div>
        <div class="form-group">
            <label>Role / Job Title</label>
            <input type="text" id="inp-role" placeholder="Full Stack Developer" value="FULL STACK DEVELOPER">
        </div>

        <h3 class="form-heading">Contact & Socials</h3>
        <div class="form-row">
            <div class="form-group">
                <label>Phone</label>
                <input type="text" id="inp-phone" placeholder="+91 9876543210">
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="text" id="inp-email" placeholder="john@example.com">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>LinkedIn (Optional)</label>
                <input type="text" id="inp-linkedin" placeholder="linkedin.com/in/johndoe">
            </div>
            <div class="form-group">
                <label>GitHub (Optional)</label>
                <input type="text" id="inp-github" placeholder="github.com/johndoe">
            </div>
        </div>
        <div class="form-group">
            <label>Address</label>
            <input type="text" id="inp-address" placeholder="Bangalore, India">
        </div>

        <h3 class="form-heading">Summary & Skills</h3>
        <div class="form-group">
            <label>Professional Summary</label>
            <textarea id="inp-profile" placeholder="Passionate developer with expertise in..."></textarea>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Technical Skills (Comma separated)</label>
                <input type="text" id="inp-skills" placeholder="Java, Python, React, SQL, AWS">
            </div>
            <div class="form-group">
                <label>Certifications (Comma separated)</label>
                <input type="text" id="inp-certs" placeholder="AWS Certified, Google Data Analytics">
            </div>
        </div>

        <h3 class="form-heading">Projects (Important)</h3>
        <div class="form-group">
            <label>Project 1 Title</label>
            <input type="text" id="inp-proj1-title" placeholder="E-Commerce Website">
            <textarea id="inp-proj1-desc" placeholder="Built a full-stack shopping platform using React and Node.js..." style="height:50px; margin-top:5px;"></textarea>
        </div>
        <div class="form-group">
            <label>Project 2 Title</label>
            <input type="text" id="inp-proj2-title" placeholder="AI Chatbot">
            <textarea id="inp-proj2-desc" placeholder="Developed a chatbot utilizing OpenAI API and Python..." style="height:50px; margin-top:5px;"></textarea>
        </div>

        <h3 class="form-heading">Education & CGPA</h3>
        <div class="form-row">
            <div class="form-group" style="flex:2;">
                <label>Degree 1</label>
                <input type="text" id="inp-edu1" placeholder="B.Tech Computer Science (2020-2024)">
            </div>
            <div class="form-group" style="flex:1;">
                <label>CGPA / %</label>
                <input type="text" id="inp-edu1-cgpa" placeholder="8.5 CGPA">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group" style="flex:2;">
                <label>Degree 2</label>
                <input type="text" id="inp-edu2" placeholder="High School (2018-2020)">
            </div>
            <div class="form-group" style="flex:1;">
                <label>CGPA / %</label>
                <input type="text" id="inp-edu2-cgpa" placeholder="92%">
            </div>
        </div>

        <button class="generate-btn" onclick="generateResume()">CREATE MY PORTFOLIO</button>
    </div>

    <div id="resume-preview">
        <div class="resume-header">
            <div class="profile-pic-container">
                <img id="out-photo" src="https://via.placeholder.com/150" alt="Profile">
            </div>
            <div class="header-text">
                <h1 class="header-name"><span id="out-fname">JOHN</span> <span id="out-lname">DOE</span></h1>
                <div class="header-role" id="out-role">Full Stack Developer</div>
            </div>
        </div>

        <div class="resume-body">
            <div class="left-col">
                <h4 class="section-title">Contact</h4>
                <div class="contact-info">
                    <div><i class="fas fa-phone-alt"></i> <span id="out-phone"></span></div>
                    <div><i class="fas fa-envelope"></i> <span id="out-email"></span></div>
                    <div><i class="fas fa-map-marker-alt"></i> <span id="out-address"></span></div>
                    <div id="div-linkedin" style="display:none;"><i class="fab fa-linkedin"></i> <span id="out-linkedin"></span></div>
                    <div id="div-github" style="display:none;"><i class="fab fa-github"></i> <span id="out-github"></span></div>
                </div>

                <br>
                <h4 class="section-title">Skills</h4>
                <ul class="skills-list" id="out-skills"></ul>

                <br>
                <h4 class="section-title">Certifications</h4>
                <ul class="cert-list" id="out-certs"></ul>
                
                <br>
                <h4 class="section-title">Languages</h4>
                <ul class="skills-list">
                    <li>English</li>
                    <li>Tamil</li>
                </ul>
            </div>

            <div class="right-col">
                <h4 class="section-title">Profile</h4>
                <p class="profile-summary" id="out-profile"></p>

                <h4 class="section-title">Projects</h4>
                <div class="item-block">
                    <div class="item-header">
                        <span class="item-title" id="out-proj1-title"></span>
                    </div>
                    <p class="item-desc" id="out-proj1-desc"></p>
                </div>
                <div class="item-block">
                    <div class="item-header">
                        <span class="item-title" id="out-proj2-title"></span>
                    </div>
                    <p class="item-desc" id="out-proj2-desc"></p>
                </div>

                <h4 class="section-title">Education</h4>
                <div class="item-block">
                    <div class="item-header">
                        <span class="item-title" id="out-edu1"></span>
                        <span class="cgpa-badge" id="out-edu1-cgpa"></span>
                    </div>
                </div>
                <div class="item-block">
                    <div class="item-header">
                        <span class="item-title" id="out-edu2"></span>
                        <span class="cgpa-badge" id="out-edu2-cgpa"></span>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="controls" id="controls">
        <button class="control-btn" style="background:#555" onclick="editResume()">Edit</button>
        <button class="control-btn" id="download-btn" onclick="downloadPDF()">Download PDF</button>
    </div>

    <script>
        function generateResume() {
            // Text Fields
            document.getElementById('out-fname').innerText = document.getElementById('inp-fname').value;
            document.getElementById('out-lname').innerText = document.getElementById('inp-lname').value;
            document.getElementById('out-role').innerText = document.getElementById('inp-role').value;
            document.getElementById('out-phone').innerText = document.getElementById('inp-phone').value;
            document.getElementById('out-email').innerText = document.getElementById('inp-email').value;
            document.getElementById('out-address').innerText = document.getElementById('inp-address').value;
            document.getElementById('out-profile').innerText = document.getElementById('inp-profile').value;

            // Socials Logic
            const linkedin = document.getElementById('inp-linkedin').value;
            const github = document.getElementById('inp-github').value;
            
            if(linkedin) {
                document.getElementById('div-linkedin').style.display = 'flex';
                document.getElementById('out-linkedin').innerText = linkedin;
            }
            if(github) {
                document.getElementById('div-github').style.display = 'flex';
                document.getElementById('out-github').innerText = github;
            }

            // Lists (Skills & Certs)
            fillList('inp-skills', 'out-skills');
            fillList('inp-certs', 'out-certs');

            // Projects
            document.getElementById('out-proj1-title').innerText = document.getElementById('inp-proj1-title').value;
            document.getElementById('out-proj1-desc').innerText = document.getElementById('inp-proj1-desc').value;
            document.getElementById('out-proj2-title').innerText = document.getElementById('inp-proj2-title').value;
            document.getElementById('out-proj2-desc').innerText = document.getElementById('inp-proj2-desc').value;

            // Education & CGPA
            document.getElementById('out-edu1').innerText = document.getElementById('inp-edu1').value;
            document.getElementById('out-edu1-cgpa').innerText = document.getElementById('inp-edu1-cgpa').value;
            document.getElementById('out-edu2').innerText = document.getElementById('inp-edu2').value;
            document.getElementById('out-edu2-cgpa').innerText = document.getElementById('inp-edu2-cgpa').value;

            // Photo
            const fileInput = document.getElementById('inp-photo');
            if (fileInput.files && fileInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('out-photo').src = e.target.result;
                }
                reader.readAsDataURL(fileInput.files[0]);
            }

            // Toggle Display
            document.getElementById('input-section').style.display = 'none';
            document.getElementById('resume-preview').style.display = 'block';
            document.getElementById('controls').style.display = 'flex';
            window.scrollTo(0,0);
        }

        function fillList(inputId, outputId) {
            const items = document.getElementById(inputId).value.split(',');
            const listContainer = document.getElementById(outputId);
            listContainer.innerHTML = '';
            items.forEach(item => {
                if(item.trim()) {
                    listContainer.innerHTML += `<li>${item.trim()}</li>`;
                }
            });
        }

        function editResume() {
            document.getElementById('input-section').style.display = 'block';
            document.getElementById('resume-preview').style.display = 'none';
            document.getElementById('controls').style.display = 'none';
        }

        // NEW FUNCTION: Direct PDF Download
        function downloadPDF() {
            const element = document.getElementById('resume-preview');
            const btn = document.getElementById('download-btn');
            
            // Visual feedback
            const originalText = btn.innerText;
            btn.innerText = "Generating...";
            btn.classList.add('downloading');

            // Options for the PDF generation
            const opt = {
                margin:       0,
                filename:     'my-resume.pdf',
                image:        { type: 'jpeg', quality: 0.98 },
                html2canvas:  { scale: 2, useCORS: true }, // scale: 2 improves resolution
                jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };

            // Generate and Save
            html2pdf().set(opt).from(element).save().then(() => {
                // Reset button
                btn.innerText = originalText;
                btn.classList.remove('downloading');
            });
        }
    </script>
</body>
</html>
